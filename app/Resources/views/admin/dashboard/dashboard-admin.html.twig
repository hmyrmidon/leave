{% extends ":admin/dashboard:dashboard.html.twig" %}
{% block stylesheet %}
    {{ parent() }}
    <!-- NProgress -->
    <link href="{{ asset('plugins/nprogress/nprogress.css') }}" rel="stylesheet">
    <!-- FullCalendar -->
    <link href="{{ asset('plugins/fullcalendar/dist/fullcalendar.css') }}" rel="stylesheet">
    <link href="{{ asset('plugins/fullcalendar/dist/fullcalendar.print.css') }}" rel="stylesheet" media="print">

{% endblock stylesheet %}
{% block top_tiles %}

    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="tile-stats">
            <div class="icon"><i class="fa fa-refresh"></i></div>
            <div class="count">0</div>
            <h3>Congés payés</h3>
            <p></p>
        </div>
    </div>
    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="tile-stats">
            <div class="icon"><i class="fa fa-refresh"></i></div>
            <div class="count">0</div>
            <h3>Utilisateurs</h3>
            <p></p>
        </div>
    </div>
    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="tile-stats">
            <div class="icon"><i class="fa fa-refresh"></i></div>
            <div class="count">0</div>
            <h3>Utilisateurs</h3>
            <p></p>
        </div>
    </div>
    <div class="animated flipInY col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <div class="tile-stats">
            <div class="icon"><i class="fa fa-refresh"></i></div>
            <div class="count">0</div>
            <h3>Utilisateurs</h3>
            <p></p>
        </div>
    </div>
{% endblock top_tiles %}
{% block infos %}
    <div class="col-md-12">
        <div class="x_panel">
            <div class="x_title">
                <h2>Planning de congés</h2>
                <div class="pull-right">
                    Statut:
                    <a role="button" id="pending" class="btn pending_event btn-success btn-xs">En attente</a>
                    <a role="button" id="validate" class="btn validate_event btn-success btn-xs"></i>Validé</a>
                    <a role="button" id="denied" class="btn denied_event btn-success btn-xs"></i>Refusé</a>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="x_content">
                <div id='calendar'></div>
            </div>
        </div>
    </div>
    <div id="CalenderModalNew" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="myModalLabel">New Calendar Entry</h4>
                </div>
                <div class="modal-body">
                    <div id="testmodal" style="padding: 5px 20px;">
                        <form id="antoform" class="form-horizontal calender" role="form">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Title</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="title" name="title">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Description</label>
                                <div class="col-sm-9">
                                    <textarea class="form-control" style="height:55px;" id="descr"
                                              name="descr"></textarea>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default antoclose" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary antosubmit">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <div id="CalenderModalEdit" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title" id="myModalLabel2">Edit Calendar Entry</h4>
                </div>
                <div class="modal-body">

                    <div id="testmodal2" style="padding: 5px 20px;">
                        <form id="antoform2" class="form-horizontal calender" role="form">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Title</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="title2" name="title2">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Description</label>
                                <div class="col-sm-9">
                                    <textarea class="form-control" style="height:55px;" id="descr2"
                                              name="descr"></textarea>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default antoclose2" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary antosubmit2">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <div id="fc_create" data-toggle="modal" data-target="#CalenderModalNew"></div>
    <div id="fc_edit" data-toggle="modal" data-target="#CalenderModalEdit"></div>
    <!-- /calendar modal -->
{% endblock infos %}
{% block javascript %}
    {{ parent() }}
    <!-- FastClick -->
    <script src="{{ asset('plugins/fastclick/lib/fastclick.js') }}"></script>
    <!-- NProgress -->
    <script src="{{ asset('plugins/nprogress/nprogress.js') }}"></script>
    <!-- FullCalendar -->
    <script src="{{ asset('plugins/fullcalendar/dist/fullcalendar.js') }}"></script>

    <!-- FullCalendar -->
    <script>
        var data = {{ data|raw }};
        console.log(data);
        $(window).load(function () {
            moment.locale('fr', {
                months: "janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),
                monthsShort: "janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),
                weekdays: "dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),
                weekdaysShort: "dim._lun._mar._mer._jeu._ven._sam.".split("_"),
                weekdaysMin: "Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),
                longDateFormat: {
                    LT: "HH:mm",
                    L: "DD/MM/YYYY",
                    LL: "D MMMM YYYY",
                    LLL: "D MMMM YYYY LT",
                    LLLL: "dddd D MMMM YYYY LT"
                },
                calendar: {
                    sameDay: "[Aujourd'hui à] LT",
                    nextDay: '[Demain à] LT',
                    nextWeek: 'dddd [à] LT',
                    lastDay: '[Hier à] LT',
                    lastWeek: 'dddd [dernier à] LT',
                    sameElse: 'L'
                },
                relativeTime: {
                    future: "dans %s",
                    past: "il y a %s",
                    s: "quelques secondes",
                    m: "une minute",
                    mm: "%d minutes",
                    h: "une heure",
                    hh: "%d heures",
                    d: "un jour",
                    dd: "%d jours",
                    M: "un mois",
                    MM: "%d mois",
                    y: "un an",
                    yy: "%d ans"
                },
                ordinal: function (number) {
                    return number + (number === 1 ? 'er' : '');
                },
                week: {
                    dow: 1, // Monday is the first day of the week.
                    doy: 4  // The week that contains Jan 4th is the first week of the year.
                }
            });
            if ($.fullCalendar) {
                $.fullCalendar.lang('fr', {
                    "day": "Jour",
                    "week": "Semaine",
                    "month": "Mois",
                    "list": "Mon planning"
                }, {
                                        closeText: 'Fermer',
                                        prevText: 'Précédent',
                                        nextText: 'Suivant',
                                        currentText: 'Aujourd\'hui',
                                        dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S'],
                                        weekHeader: 'Sem.',
                                        dateFormat: 'dd/mm/yy',
                                        firstDay: 1,
                                        isRTL: false,
                                        showMonthAfterYear: false,
                                        yearSuffix: ''
                                    });
            }
            var date = new Date(),
                    d = date.getDate(),
                    m = date.getMonth(),
                    y = date.getFullYear(),
                    started,
                    categoryClass;

            var calendar = $('#calendar').fullCalendar({
                                                           header: {
                                                               left: 'prev,next today',
                                                               center: 'title',
                                                               right: 'month,agendaWeek,agendaDay'
                                                           },
                                                           selectable: true,
                                                           selectHelper: true,
                                                           editable: false,
                                                           events:data
                                                       });
        });
    </script>
    <!-- /FullCalendar -->
{% endblock javascript %}
